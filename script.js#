document.addEventListener('DOMContentLoaded', function() {
    setupAddToCartButtons();
    setupSizeSelectors();
});

function setupAddToCartButtons() {
    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', function() {
            const productCard = this.closest('.product-card');
            const productId = parseInt(productCard.dataset.id);
            
            // Get selected options
            const sizeSelect = productCard.querySelector('.size-select');
            const quantitySelect = productCard.querySelector('.quantity-select');
            const size = sizeSelect.value;
            const quantity = parseInt(quantitySelect.value);
            const price = parseFloat(sizeSelect.options[sizeSelect.selectedIndex].dataset.price);
            
            // Find product
            const product = products.find(p => p.id === productId);
            
            if (product) {
                const cartItem = {
                    productId: product.id,
                    name: product.name,
                    size: size,
                    price: price,
                    quantity: quantity,
                    image: product.image,
                    category: product.category
                };
                
                addToCart(cartItem);
                
                // Visual feedback
                this.textContent = '✓ Added!';
                this.classList.add('added');
                setTimeout(() => {
                    this.textContent = 'Add to Cart';
                    this.classList.remove('added');
                }, 2000);
            }
        });
    });
}

function setupSizeSelectors() {
    document.querySelectorAll('.size-select').forEach(select => {
        select.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            const newPrice = selectedOption.dataset.price;
            const productCard = this.closest('.product-card');
            productCard.querySelector('.product-price').textContent = `₹${newPrice}`;
            productCard.querySelector('.product-size').textContent = `Size: ${selectedOption.value}`;
        });
    });
}
