// Complete script.js implementation
document.addEventListener('DOMContentLoaded', function() {
    // Product Data that matches index.html
    const indexProducts = [
        {
            id: 1,
            name: "Chicken Pickle",
            category: "nonveg",
            description: "Spicy chicken pickle with authentic flavors",
            price: { "500g": 549, "250g": 299 },
            image: "chicken.jpeg"
        },
        {
            id: 2,
            name: "Mutton Pickle",
            category: "nonveg",
            description: "Rich mutton pickle with traditional spices",
            price: { "500g": 649, "250g": 349 },
            image: "mutton.jpeg"
        },
        {
            id: 3,
            name: "Mango Pickle",
            category: "veg",
            description: "Tangy mango pickle with perfect spice mix",
            price: { "500g": 349, "250g": 199 },
            image: "mango.jpg"
        }
    ];

    // Add to cart functionality for index.html
    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', function() {
            const productCard = this.closest('.product-card');
            const productId = parseInt(productCard.dataset.id);
            const sizeSelect = productCard.querySelector('.size-select');
            const quantitySelect = productCard.querySelector('.quantity-select');
            
            const size = sizeSelect.value;
            const quantity = parseInt(quantitySelect.value);
            const price = parseFloat(sizeSelect.options[sizeSelect.selectedIndex].dataset.price);
            
            // Find the product in our indexProducts array
            const product = indexProducts.find(p => p.id === productId);
            
            if (product) {
                // Create cart item
                const cartItem = {
                    productId: product.id,
                    name: product.name,
                    size: size,
                    price: price,
                    quantity: quantity,
                    image: product.image
                };
                
                // Add to cart
                addToCart(cartItem);
                
                // Visual feedback
                this.textContent = '✓ ADDED!';
                setTimeout(() => {
                    this.textContent = 'Add to Cart';
                }, 2000);
            }
        });
    });

    // Update price when size changes
    document.querySelectorAll('.size-select').forEach(select => {
        select.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            const newPrice = selectedOption.dataset.price;
            const productCard = this.closest('.product-card');
            productCard.querySelector('.product-price').textContent = `₹${newPrice}`;
            productCard.querySelector('.product-size').textContent = `Size: ${selectedOption.value}`;
        });
    });
});